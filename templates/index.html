<!DOCTYPE html>
<html>
<head>
    <title>Fake Review Detection</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>

<div class="container mt-5">

    <div class="card shadow-lg p-4">
        <h2 class="text-center mb-4">üïµÔ∏è Fake Review Detection System</h2>

        <!-- Single Prediction -->
        <h5>üîç Single Review</h5>
        <form method="POST" action="/predict">
            <textarea name="review" class="form-control" rows="3" placeholder="Enter review here"></textarea>
            <button type="submit" class="btn btn-primary mt-2">Predict</button>
        </form>

        {% if single_result %}
        <div class="alert alert-info mt-3">
            <strong>Review:</strong> {{ review }} <br>
            <strong>Prediction:</strong> {{ label }} <br>
            <strong>Confidence:</strong> {{ confidence }}%
        </div>
        {% endif %}

        <hr>

        <!-- Batch Prediction -->
        <h5>üì¶ Batch Reviews</h5>
        <form method="POST" action="/predict_batch">
            <textarea name="batch_reviews" class="form-control" rows="4" placeholder="Enter one review per line"></textarea>
            <button type="submit" class="btn btn-success mt-2">Predict Batch</button>
        </form>

        {% if batch_result %}
        <div class="mt-3">
            {% for review, result in batch_results %}
            <div class="alert alert-secondary">
                <strong>{{ review }}</strong><br>
                Prediction: {{ result[0] }} ({{ result[1] }}%)
            </div>
            {% endfor %}
        </div>
        {% endif %}

        <hr>

        <!-- CSV Upload -->
        <h5>üìÇ Upload CSV</h5>
        <form method="POST" action="/upload_csv" enctype="multipart/form-data">
            <input type="file" name="file" class="form-control">
            <button type="submit" class="btn btn-warning mt-2">Upload & Predict</button>
        </form>

        {% if table %}
        <div class="mt-4">
            {{ table | safe }}
        </div>
        {% endif %}

        {% if error %}
        <div class="alert alert-danger mt-3">
            {{ error }}
        </div>
        {% endif %}

    </div>

</div>

</body>
</html>
